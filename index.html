<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Retry Backoff Calculator (Linear & Exponential)</title>
    <meta
      name="description"
      content="Interactive retry backoff calculator for linear and exponential strategies. Visualize per-retry and cumulative delays, caps, and total wait time."
    />
    <meta
      name="keywords"
      content="retry backoff calculator, exponential backoff calculator, linear backoff calculator, retry delay visualization"
    />
    <meta name="robots" content="index,follow,max-image-preview:large" />
    <meta name="application-name" content="Retry Backoff Calculator" />
    <link rel="canonical" href="https://retries.dev/" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:url" content="https://retries.dev/" />
    <meta property="og:title" content="Retry Backoff Calculator (Linear & Exponential)" />
    <meta
      property="og:description"
      content="Calculate and visualize linear or exponential retry schedules with capped and cumulative delay totals."
    />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Retry Backoff Calculator (Linear & Exponential)" />
    <meta
      name="twitter:description"
      content="Calculate and visualize linear or exponential retry schedules with capped and cumulative delay totals."
    />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Retry Backoff Calculator",
        "url": "https://retries.dev/",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "Any",
        "description": "Calculate and visualize linear and exponential retry backoff delays with optional max delay caps.",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        }
      }
    </script>
    <link rel="stylesheet" href="./styles.css" />
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"
    ></script>
    <script type="module" src="./src/main.js"></script>
  </head>
  <body>
    <main class="app-shell">
      <section class="panel app-panel">
        <header class="app-header">
          <div class="header-row">
            <h1>Retry Backoff Calculator</h1>
            <div class="header-actions">
              <button
                id="share-link"
                class="share-link-button"
                type="button"
                aria-label="Copy URL for current config"
                title="Copy URL for current config"
              >
                <span class="share-link-icon share-link-icon--default" aria-hidden="true">
                  <svg viewBox="0 0 24 24" focusable="false" aria-hidden="true">
                    <path
                      d="M11.47 3.22a.75.75 0 0 1 1.06 0l3.75 3.75a.75.75 0 1 1-1.06 1.06L12.75 5.56V13a.75.75 0 0 1-1.5 0V5.56L8.78 8.03a.75.75 0 1 1-1.06-1.06l3.75-3.75ZM6.5 9.25A2.25 2.25 0 0 0 4.25 11.5v7A2.25 2.25 0 0 0 6.5 20.75h11A2.25 2.25 0 0 0 19.75 18.5v-7a2.25 2.25 0 0 0-2.25-2.25h-2.25a.75.75 0 0 0 0 1.5h2.25c.41 0 .75.34.75.75v7a.75.75 0 0 1-.75.75h-11a.75.75 0 0 1-.75-.75v-7c0-.41.34-.75.75-.75h2.25a.75.75 0 0 0 0-1.5H6.5Z"
                    />
                  </svg>
                </span>
                <span class="share-link-icon share-link-icon--success" aria-hidden="true">✓</span>
                <span class="share-link-icon share-link-icon--error" aria-hidden="true">!</span>
                <span class="visually-hidden">Copy URL for current config</span>
              </button>
              <button
                id="theme-toggle"
                class="theme-toggle"
                type="button"
                aria-label="Switch theme"
                title="Switch theme"
                aria-pressed="false"
              >
                ☀
              </button>
            </div>
          </div>
        </header>

        <section class="content-block controls-panel">
          <div id="backoff-controls" class="controls-grid">
            <fieldset class="field field--full strategy-field" aria-label="Retry strategy">
              <div class="strategy-toggle">
                <input
                  id="strategy-exponential"
                  type="radio"
                  name="strategy"
                  value="exponential"
                  checked
                />
                <label for="strategy-exponential" class="strategy-option">Exponential</label>

                <input id="strategy-linear" type="radio" name="strategy" value="linear" />
                <label for="strategy-linear" class="strategy-option">Linear</label>
              </div>
            </fieldset>

            <label class="field">
              <span>Initial Delay (ms)</span>
              <input
                id="initialDelayMs"
                name="initialDelayMs"
                aria-describedby="error-initialDelayMs"
                type="number"
                min="0"
                value="500"
                step="any"
              />
              <span id="error-initialDelayMs" class="field-error" aria-live="polite"></span>
            </label>

            <label class="field">
              <span>Max Retries (excludes initial request)</span>
              <input
                id="maxRetries"
                name="maxRetries"
                aria-describedby="error-maxRetries hint-maxRetries"
                type="number"
                min="0"
                max="1000"
                step="1"
                inputmode="numeric"
                value="5"
              />
              <span id="error-maxRetries" class="field-error" aria-live="polite"></span>
              <span id="hint-maxRetries" class="field-note" aria-live="polite"></span>
            </label>

            <label class="field">
              <span>Max Delay Cap (ms, optional)</span>
              <input
                id="maxDelayMs"
                name="maxDelayMs"
                aria-describedby="error-maxDelayMs"
                type="number"
                min="0"
                step="any"
              />
              <span id="error-maxDelayMs" class="field-error" aria-live="polite"></span>
            </label>

            <label id="factor-group" class="field strategy-only">
              <span>Backoff Factor (&gt; 1)</span>
              <input
                id="factor"
                name="factor"
                aria-describedby="error-factor"
                type="number"
                min="1.0001"
                step="any"
                value="2"
              />
              <span id="error-factor" class="field-error" aria-live="polite"></span>
            </label>

            <label id="increment-group" class="field strategy-only" hidden>
              <span>Linear Increment (ms)</span>
              <input
                id="incrementMs"
                name="incrementMs"
                aria-describedby="error-incrementMs"
                type="number"
                min="0"
                step="any"
                value="500"
              />
              <span id="error-incrementMs" class="field-error" aria-live="polite"></span>
            </label>
          </div>
        </section>

        <section class="content-block chart-panel">
          <div class="chart-toolbar">
            <fieldset class="chart-mode-field" aria-label="Chart delay mode">
              <div class="chart-mode-toggle">
                <input
                  id="chart-mode-delay"
                  type="radio"
                  name="chartMode"
                  value="delay"
                  checked
                />
                <label for="chart-mode-delay" class="chart-mode-option">Per Retry Delay</label>

                <input
                  id="chart-mode-cumulative"
                  type="radio"
                  name="chartMode"
                  value="cumulative"
                />
                <label for="chart-mode-cumulative" class="chart-mode-option">
                  Cumulative Delay
                </label>
              </div>
            </fieldset>
          </div>
          <div class="chart-frame">
            <canvas id="delay-chart" aria-label="Retry delay chart" role="img"></canvas>
          </div>
        </section>

        <section class="content-block summary-panel">
          <div class="summary-grid">
            <article class="summary-card">
              <h3>Total Retries</h3>
              <p id="summary-total-retries">-</p>
            </article>
            <article class="summary-card">
              <h3>Final Retry Delay</h3>
              <p id="summary-final-delay">-</p>
            </article>
            <article class="summary-card">
              <h3>Total Cumulative Wait</h3>
              <p id="summary-total-delay">-</p>
            </article>
            <article class="summary-card summary-card--display">
              <h3>Display</h3>
              <label class="summary-display-label" for="display-mode">
                <span class="visually-hidden">Duration display mode</span>
                <select id="display-mode" name="displayMode">
                  <option value="ms" selected>Milliseconds</option>
                  <option value="s">Seconds</option>
                  <option value="min">Minutes</option>
                  <option value="h">Hours</option>
                  <option value="humanize">Humanize</option>
                </select>
              </label>
            </article>
          </div>
        </section>

        <section class="content-block table-panel">
          <div class="table-wrap">
            <table>
              <thead>
                <tr>
                  <th>Retry #</th>
                  <th id="raw-delay-header">Raw Delay (ms)</th>
                  <th id="capped-delay-header">Capped Delay (ms)</th>
                  <th id="cumulative-delay-header">Cumulative Delay (ms)</th>
                </tr>
              </thead>
              <tbody id="schedule-body">
                <tr>
                  <td class="placeholder-cell" colspan="4">
                    Adjust inputs to generate a schedule.
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>
      </section>
    </main>
    <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "891925f0a47d4c24b8f3161ff50809f1"}'></script><!-- End Cloudflare Web Analytics -->
  </body>
</html>
